{% extends "layout.html" %}
{% block title %}Editar Comanda #{{ order.id }}{% endblock %}
{% block body %}
<main class="container" x-data="{ confirm: false, modal: false }">
  <h1>Editar Comanda #{{ order.id }}</h1>

  <form method="post">
    {% csrf_token %}

    <label for="table">Mesa</label>
    <select name="table" id="table" required>
      <option value="">-- Seleccionar Mesa --</option>
      {% for table in tables %}
        <option value="{{ table.id }}" {% if order.table and order.table.id == table.id %}selected{% endif %}>
          Mesa {{ table.name }}
        </option>
      {% endfor %}
    </select>

    <label for="user">Mesero</label>
    <select name="user" id="user" required>
      <option value="">-- Seleccionar Mesero --</option>
      {% for user in users %}
        <option value="{{ user.id }}" {% if order.user and order.user.id == user.id %}selected{% endif %}>
          {{ user.username }}
        </option>
      {% endfor %}
    </select>

    <label>
      <input type="checkbox" name="is_paid" {% if order.is_paid %}checked{% endif %}>
      Marcar como pagado
    </label>

    <footer style="margin-top: 1rem; display: flex; gap: 1rem;">
      <a href="{% url 'order_detail' order.id %}" role="button" class="secondary">â† Cancelar</a>
      <button @click.prevent="modal=true">ğŸ’¾ Guardar Cambios</button>
    </footer>
    <dialog x-bind:open="modal" x-show="modal">
        <article @click.outside="modal=false">
            <h2>Confirmar cambios</h2>
            <p>Â¿Deseas guardar los cambios realizados en esta comanda?</p>
            <footer>
                <button class="secondary" @click.prevent="modal = false">
                    Cancelar
                </button>
                <button>Confirmar</button>
            </footer>
        </article>
    </dialog>
  </form>
</main>
{% endblock %}
